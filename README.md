# Threaded-File-Crawler
Author(s): Dylan Dawson, University of Kentucky

Contributions: The University of Kentucky provided a skeleton outline of the program including the makefile and some function initializations and descriptions, but the majority of the code for the project was written by the student, Dylan Dawson. This includes function definitions, most of the main function, and nearly all of the comments. In addition, this file was written by the student without assistance from the University.

Purpose: The purpose of this project is to create a multi-threaded file crawler utilizing the POSIX threads library. The crawler's purpose is to take as arguments the number of threads for the program to utilize (between 1 and 8 inclusive), the string for the program to search for, and the names of any textfiles or directories that the program should search through and to return the number of times that the string was found in any of the textfiles or textfiles within any passed in directories or subdirectories of the passed in directories. The program also has additional intermediate output to track when threads add new files or directories to the queue.

Implementation: The project includes a makefile, a main file named crawl.c, and two files names fifoq.h and fifoq.c used to implement a thread safe FIFO queue. The FIFO queue is designed so that items can be added to it and removed from it concurrently by mutliple threads without any errors due to race conditions. Mutexes and conditional variables are used to accomplish this and the purposes of specific variables are explained in the comments of those files. Fifoq.c also includes a function to block until the thread the limit has been reached and the queue is empty. The reason that this is necessary is that the queue could temporarily become empty while a thread is working on adding a directory, causing an early termination of the main thread if it ended when the queue was empty and then something else was added. Because of this, the fq_finish function allows for the main thread to block after creating the "worker" threads until all other threads are waiting for something to be added to the queue and the queue is empty. The worker threads concurrently pop elements from the queue and either count the number of times a string occurs if the element is a textfile or push the contents of the file to the queue if the file is a directory. The main thread does error checking on the initial passed in arguments, adds any passed in files or directories to the queue, spawns the correct number of worker threads, and then blocks until all worker threads are waiting for something to be added to the queue and the queue is empty. Once this happens, the program outputs the total number of occurences of the string and terminates. The program does not count any occurences of the string in file or directory names.
